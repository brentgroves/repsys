# **[Types of Bridge Protocol Data Unit(BPDUs)](https://www.geeksforgeeks.org/computer-networks/types-of-bridge-protocol-data-unitbpdus/)**

Bridge Protocol Data Units (BPDUs) are the messages that are transmitted across LAN networks to enable switches to participate in Spanning Tree Protocol (STP) by gathering information about each other. It contains information regarding switch ports such as port ID, port priority, port cost, and MAC addresses. A switch sends BPDUs from their origin port to a multicast address with a destination MAC address.

There are mainly two types of Bridge Protocol Data Units:

1. Configuration BPDU
2. Topology Change Notification (TCN) BPDU

## Configuration Bridge Protocol Data Units

Configuration BPDUs are generated by the root switch of the network. These are responsible for controlling and authenticating the flow of data away from the root bridge and they also act as a firewall to protect the network from external threats. Configuration BPDUs also helps in selecting the root switch for the network as when configuration BPDUs are transmitted switch compares the switch ID with the current root switch ID and switch with the lowest ID is selected as the root switch and BPDUs are relayed from the selected root switch.

Working:
When the network is initiated, every switch considers itself as a root switch and generates configuration BPDUs and transmits them at regular intervals. Every switch port receiving the configuration BPDU compares its own switch ID with the switch ID of the root of the received BPDU and if the switch ID of the root is superior to its own switch ID then it work as a non-root switch and doesn't generate configuration BPDUs but just update certain fields of received BPDU such as message age, root path cost, sender bridge ID, etc. and transmits this BPDU to the designated port. On the contrary, if the ID of the root of the received BPDU is lower than the ID of receiving port then the port responds with its own configuration BPDU. In case of path failure root port does not receive new configuration BPDUs then, in this case, it transmits configuration BPDUs and TCN BPDUs with itself as root and trigger the STP calculation process to establish a new path and restore network connectivity.

![i1](https://media.geeksforgeeks.org/wp-content/uploads/20220104175603/GeeksforGeeks1.PNG)

Applications:

- Control and authenticate flow of data within the network
- Protect the network from external actions
- Select root switch of the network
- Detect loop in **[network topology](https://www.geeksforgeeks.org/computer-networks/types-of-network-topology/)**

Working:
When a switch encounters a topology change in the network it generates a Topology Change Notification BPDU with all the information about the topology that is currently being used and sends it to the root port. Root port on receiving the TCN BPDU responds back sender with Topology Change Acknowledgment (TCA) BPDU. Now, the upstream switch that received the TCN BPDU generates its own TCN BPDU and transmits it to its root port. This process is continued till the root bridge receives TCN BPDU. Once, root bridge is notified about topology change, it generates a configuration BPDU with topology change bit set and broadcast this BPDU to the entire network so that all the switches are notified about topology change within the network.

![i2](https://media.geeksforgeeks.org/wp-content/uploads/20220104175602/GeeksforGeeks2.PNG)

Applications:
Notifies root bridge about topology change within the network
Carries information about the topology change
