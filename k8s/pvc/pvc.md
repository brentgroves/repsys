# **[pvc test](https://8grams.medium.com/microk8s-creating-persistent-volume-in-a-single-node-kubernetes-cluster-68fca1c42d40)**

## Creating Persistent Volumes with Ease

One of the most common use cases we have encountered is the need to create persistent volumes. In traditional Kubernetes environments, this can be a complex and time-consuming process. However, with Microk8s, the implementation is surprisingly simple.

To create a persistent volume in Microk8s, all you need to do is define a PersistentVolumeClaim (PVC) in your deployment configuration. Microk8s takes care of the rest, automatically provisioning the storage and binding it to the desired container. This streamlined process reduces the potential for human error and accelerates deployment times, ultimately benefiting the entire organization. Here are the detailed steps:

## Activate Hostpath Storage AddOn

The Hostpath storage add-on in MicroK8s provides a straightforward method for provisioning PersistentVolumes supported by a host directory. This is perfect for local development purposes, but users should keep in mind the following considerations for all use cases:

PersistentVolumeClaims generated by the hostpath storage provisioner are tied to the local node, making it impossible to transfer them to a different node.
A hostpath volume has the potential to expand beyond the capacity specified in the volume claim manifest.

```bash
microk8s enable hostpath-storage
```

## Creating PVC Configuration

We will create 5GB Persistent Volume with ReadWriteMany access mode

```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: app-upload-pvc
spec:
  accessModes: [ReadWriteMany]
  resources: { requests: { storage: 5Gi } }
```

## Install it

```bash
pushd .
cd ~/src/repsys/k8s/pvc
kubectl apply -f pvc.yaml

```

## Verify Installation

Note: This wont say bound until a pod which needs it is deployed!

```bash
kubectl get pvc
NAME     STATUS   VOLUME    CAPACITY   ACCESS         MODES
app-pvc  Bound    pvc-xxx   5Gi        RWX            microk8s-hostpath
```
